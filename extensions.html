<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extensions - runLemonade</title>
    <link rel="stylesheet" href="styles/common.css?v=1.1">
    <link rel="stylesheet" href="components/download-modal.css?v=1.1">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }

        /* Remove custom header/nav/button styles here */
        
        /* Modal close button styles */
        .close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            font-size: 24px;
            color: #8e8e93;
            cursor: pointer;
            width: 32px;
            height: 32px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            z-index: 10001;
        }
        
        .close:hover {
            background: rgba(0, 0, 0, 0.1);
            color: #333;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #f4d03f 0%, #f7dc6f 25%, #f39c12 75%, #e67e22 100%);
            min-height: 50vh;
            position: relative;
            overflow: hidden;
            padding-top: 70px;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #f4d03f 0%, #f7dc6f 25%, #f39c12 75%, #e67e22 100%);
            clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%);
        }

        .hero::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: white;
            clip-path: polygon(0 100%, 100% 100%, 100% 0);
        }

        .hero-content {
            text-align: center;
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: 4rem 2rem;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            color: #2c3e50;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.9;
        }

        /* Filter Section */
        .filter-section {
            background: white;
            padding: 2rem 0;
            border-bottom: 1px solid #e5e8eb;
        }

        .filter-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .filter-controls {
            display: flex;
            gap: 2rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .filter-label {
            font-weight: 600;
            color: #666;
            font-size: 14px;
        }

        .filter-pills {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .filter-pill {
            padding: 8px 16px;
            border-radius: 8px;
            border: 2px solid #e5e8eb;
            background: white;
            color: #666;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .filter-pill:hover {
            border-color: #f4d03f;
            color: #333;
        }

        .filter-pill.active {
            background: linear-gradient(135deg, #f4d03f, #f7dc6f);
            border-color: #f4d03f;
            color: #2c3e50;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px 16px;
            margin-left: auto;
            min-width: 280px;
            border: 1px solid #e5e8eb;
        }

        .search-box input {
            border: none;
            background: transparent;
            outline: none;
            flex: 1;
            font-size: 14px;
            color: #333;
        }

        .search-box input::placeholder {
            color: #999;
        }

        /* Extensions Grid */
        .extensions-section {
            background: white;
            padding: 5rem 0;
        }

        .extensions-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-title {
            font-size: 3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .section-subtitle {
            color: #666;
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .extensions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }

        .extension-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e8eb;
            transition: all 0.4s ease;
            position: relative;
        }

        .extension-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
        }

        .extension-preview {
            height: 160px;
            background: #f8f9fa;
            border-radius: 16px 16px 0 0;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }

        .extension-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 16px 16px 0 0;
            display: block;
        }

        .extension-status {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-available {
            background: #27ae60;
            color: white;
        }

        .status-beta {
            background: #f39c12;
            color: white;
        }

        .status-coming-soon {
            background: #3498db;
            color: white;
        }

        .extension-content {
            padding: 2rem;
        }

        .extension-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .extension-title {
            font-size: 20px;
            font-weight: 700;
            color: #333;
            margin-bottom: 4px;
        }

        .extension-category {
            font-size: 12px;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .extension-rating {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .stars {
            color: #f4d03f;
            font-size: 14px;
        }

        .rating-text {
            font-size: 12px;
            color: #999;
        }

        .extension-description {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.5;
            font-size: 14px;
        }

        .extension-features {
            list-style: none;
            margin-bottom: 1rem;
        }

        .extension-features li {
            padding: 2px 0;
            font-size: 13px;
            color: #999;
            position: relative;
            padding-left: 16px;
        }

        .extension-features li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #f4d03f;
            font-weight: bold;
            font-size: 12px;
        }

        .extension-footer {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e8eb;
        }

        .extension-pricing {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            text-align: center;
        }

        .extension-price {
            font-weight: 700;
            color: #333;
            font-size: 1.1rem;
        }

        .extension-trial {
            font-size: 0.8rem;
            color: #27ae60;
            font-weight: 500;
        }

        .price-free {
            color: #27ae60;
        }

        .extension-actions {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            width: 100%;
        }

        .download-button {
            background: linear-gradient(135deg, #f4d03f, #f7dc6f);
            color: #2c3e50;
            padding: 10px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            white-space: nowrap;
            text-align: center;
            width: 100%;
        }

        .download-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(244, 208, 63, 0.3);
        }

        .download-button:disabled {
            background: #95a5a6;
            color: white;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .purchase-licence-button {
            background: linear-gradient(135deg, #f4d03f, #f7dc6f);
            color: #2c3e50;
            padding: 10px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 13px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            white-space: nowrap;
            text-align: center;
            width: 100%;
        }

        .purchase-licence-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(244, 208, 63, 0.3);
        }

        /* See More Button */
        .see-more-button {
            background: transparent;
            color: #666;
            border: 1px solid #e5e8eb;
            padding: 10px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            text-align: center;
            width: 100%;
        }

        .see-more-button:hover {
            background: #f8f9fa;
            color: #333;
            border-color: #f4d03f;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 2rem 1rem 2rem;
            border-bottom: 1px solid #e5e8eb;
        }

        .modal-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
            margin: 0;
        }

        .close {
            color: #999;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #333;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-hero {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .modal-preview {
            height: 300px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #f4d03f;
            font-size: 2rem;
            font-weight: bold;
        }

        .modal-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .modal-status {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            width: fit-content;
        }

        .modal-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 16px;
        }

        .modal-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
        }

        .modal-trial {
            font-size: 0.9rem;
            color: #27ae60;
            font-weight: 500;
        }

        .modal-description {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .modal-long-description {
            font-size: 1rem;
            color: #666;
            line-height: 1.6;
            margin-bottom: 2rem;
            font-style: italic;
        }

        .modal-whats-new {
            background: linear-gradient(135deg, #f4d03f 0%, #f7dc6f 100%);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .modal-whats-new h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .whats-new-version {
            font-size: 0.9rem;
            color: #2c3e50;
            opacity: 0.8;
            margin-bottom: 0.5rem;
        }

        .whats-new-description {
            color: #2c3e50;
            line-height: 1.6;
        }

        .modal-specs {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .modal-specs h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .specs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
        }

        .spec-item {
            display: flex;
            flex-direction: column;
        }

        .spec-label {
            font-size: 0.8rem;
            color: #999;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
        }

        .spec-value {
            font-size: 0.9rem;
            color: #333;
            font-weight: 500;
        }

        .modal-subscriptions {
            margin-bottom: 2rem;
        }

        .modal-subscriptions h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .subscription-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .subscription-card {
            background: white;
            border: 2px solid #e5e8eb;
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .subscription-card:hover {
            border-color: #f4d03f;
            transform: translateY(-2px);
        }

        .subscription-card.featured {
            border-color: #f4d03f;
            background: linear-gradient(135deg, #fff9c4 0%, #fff 100%);
        }

        .subscription-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .subscription-description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.4;
        }

        .subscription-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .subscription-action {
            font-size: 0.9rem;
            color: #f4d03f;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .subscribe-btn {
            background: linear-gradient(135deg, #f4d03f, #f7dc6f);
            color: #2c3e50;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .subscribe-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(244, 208, 63, 0.3);
        }

        .subscribe-btn.contact-btn {
            background: linear-gradient(135deg, #3498db, #5dade2);
            color: white;
        }

        .subscribe-btn.contact-btn:hover {
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3);
        }

        /* Download Modal Styles */
        .download-modal-content {
            max-width: 600px;
        }

        .download-hero {
            text-align: center;
            margin-bottom: 2rem;
        }

        .download-hero h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .email-signup-section {
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .email-signup-section h4 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .download-btn {
            background: linear-gradient(135deg, #f4d03f, #f7dc6f);
            color: #2c3e50;
            padding: 16px 32px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0 auto;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(244, 208, 63, 0.3);
        }

        .download-icon {
            font-size: 18px;
        }

        .modal-reviews {
            margin-bottom: 2rem;
        }

        .modal-reviews h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .reviews-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .review-item {
            background: white;
            border: 1px solid #e5e8eb;
            border-radius: 12px;
            padding: 1.5rem;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .review-info h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.25rem;
        }

        .review-author {
            font-size: 0.9rem;
            color: #666;
        }

        .review-stars {
            color: #f4d03f;
            font-size: 1rem;
        }

        .review-text {
            color: #666;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .modal-faqs {
            margin-bottom: 2rem;
        }

        .modal-faqs h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .faq-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .faq-item {
            background: white;
            border: 1px solid #e5e8eb;
            border-radius: 8px;
            overflow: hidden;
        }

        .faq-question {
            background: #f8f9fa;
            padding: 1rem 1.5rem;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            transition: background-color 0.3s ease;
            position: relative;
        }

        .faq-question:hover {
            background: #e9ecef;
        }

        .faq-question::after {
            content: '+';
            position: absolute;
            right: 1.5rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            color: #666;
        }

        .faq-question.active::after {
            content: '−';
        }

        .faq-answer {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .faq-answer.active {
            padding: 1rem 1.5rem;
            max-height: 200px;
        }

        .faq-answer p {
            color: #666;
            line-height: 1.6;
            margin: 0;
        }

        .modal-features {
            margin-bottom: 2rem;
        }

        .modal-features h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .modal-features ul {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.75rem;
        }

        .modal-features li {
            padding: 0.5rem 0;
            color: #666;
            font-size: 14px;
            position: relative;
            padding-left: 1.5rem;
        }

        .modal-features li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #f4d03f;
            font-weight: bold;
            font-size: 12px;
        }

        .modal-details {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .modal-details h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .modal-details p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .modal-download-btn {
            background: linear-gradient(135deg, #f4d03f, #f7dc6f);
            color: #2c3e50;
            padding: 12px 32px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }

        .modal-download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(244, 208, 63, 0.3);
        }

        .modal-demo-btn {
            background: white;
            color: #333;
            border: 2px solid #e5e8eb;
            padding: 12px 32px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .modal-demo-btn:hover {
            border-color: #f4d03f;
            color: #f4d03f;
        }

        /* Coming Soon Section */
        .coming-soon-section {
            background: #f8f9fa;
            padding: 5rem 0;
            position: relative;
        }

        .coming-soon-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 70% 30%, rgba(244, 208, 63, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .roadmap-timeline {
            position: relative;
            margin-top: 3rem;
        }

        .timeline-item {
            display: flex;
            gap: 2rem;
            margin-bottom: 3rem;
            position: relative;
        }

        .timeline-marker {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #f4d03f, #f7dc6f);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #2c3e50;
            flex-shrink: 0;
            position: relative;
            z-index: 2;
        }

        .timeline-content {
            flex: 1;
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e8eb;
        }

        .timeline-title {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .timeline-description {
            color: #666;
            margin-bottom: 1rem;
        }

        .timeline-features {
            list-style: none;
        }

        .timeline-features li {
            padding: 2px 0;
            font-size: 13px;
            color: #999;
            position: relative;
            padding-left: 16px;
        }

        .timeline-features li::before {
            content: '◦';
            position: absolute;
            left: 0;
            color: #f4d03f;
        }

        /* Footer */
        .footer {
            background: #2c3e50;
            color: white;
            padding: 3rem 0 1rem;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .footer-section a {
            display: block;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .footer-section a:hover {
            color: #f4d03f;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .extensions-grid {
                grid-template-columns: 1fr;
            }

            .filter-controls {
                flex-direction: column;
                align-items: stretch;
                gap: 1rem;
            }

            .search-box {
                margin-left: 0;
                min-width: auto;
            }

            .filter-pills {
                justify-content: center;
            }

            .timeline-item {
                flex-direction: column;
                text-align: center;
            }

            .timeline-marker {
                margin: 0 auto;
            }

            .hero-title {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 2.5rem;
            }

            .modal-hero {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
            }

            .modal-actions {
                flex-direction: column;
                gap: 0.5rem;
            }

            .modal-download-btn,
            .modal-demo-btn {
                width: 100%;
            }

            .specs-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .subscription-cards {
                grid-template-columns: 1fr;
            }

            .modal-body {
                padding: 1rem;
            }

            .modal-header {
                padding: 1rem 1rem 0.5rem 1rem;
            }

            .modal-header h2 {
                font-size: 1.4rem;
            }

            .reviews-list {
                gap: 1rem;
            }

            .review-item {
                padding: 1rem;
            }

            .faq-question {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }

            .faq-answer.active {
                padding: 0.75rem 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>
    <script src="js/components.js"></script>
    
    <!-- Add padding for fixed header -->
    <div style="height: 70px;"></div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Extension Store</h1>
            <p class="hero-subtitle">Powerful SketchUp extensions and digital fabrication tools designed to accelerate your workflow</p>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section">
        <div class="filter-container">
            <div class="filter-controls">
                <div class="filter-group">
                    <span class="filter-label">Category:</span>
                    <div class="filter-pills">
                        <a href="#" class="filter-pill active" data-filter="all">All</a>
                        <a href="#" class="filter-pill" data-filter="modeling">Modeling</a>
                        <a href="#" class="filter-pill" data-filter="fabrication">Fabrication</a>
                        <a href="#" class="filter-pill" data-filter="workflow">Workflow</a>
                        <a href="#" class="filter-pill" data-filter="utilities">Utilities</a>
                    </div>
                </div>
                
                <div class="filter-group">
                    <span class="filter-label">Status:</span>
                    <div class="filter-pills">
                        <a href="#" class="filter-pill" data-status="available">Available</a>
                        <a href="#" class="filter-pill" data-status="beta">Beta</a>
                        <a href="#" class="filter-pill" data-status="coming-soon">Coming Soon</a>
                    </div>
                </div>

                <div class="search-box">
                    <input type="text" placeholder="Search extensions..." id="searchInput">
                </div>
            </div>
        </div>
    </section>

    <!-- Available Extensions -->
    <section class="extensions-section">
        <div class="extensions-container">
            <div class="section-header">
                <h2 class="section-title">Available Extensions</h2>
                <p class="section-subtitle">Production-ready tools that are actively maintained and supported</p>
            </div>
            
            <div class="extensions-grid">
                <!-- FORM Extension -->
                <div class="extension-card interactive-element" data-category="modeling fabrication" data-status="available">
                    <div class="extension-preview">
                        <img src="images/hero-product-for-colour.png" alt="FORM Extension">
                        <div class="extension-status status-available">Available</div>
                    </div>
                    <div class="extension-content">
                        <div class="extension-header">
                            <div>
                                <h3 class="extension-title">FORM</h3>
                                <p class="extension-category">Modeling • Fabrication</p>
                            </div>
                            <div class="extension-rating">
                                <span style="font-size: 16px; font-weight: 700; color: #333; margin-right: 4px;">4.8</span>
                                <span class="stars">★★★★★</span>
                                <span class="rating-text">(10)</span>
                            </div>
                        </div>
                        
                        <p class="extension-description">
                            FORM for SketchUp is a productivity extension designed to streamline your workflow and boost efficiency. Cutting cabinet design time within SketchUp up to 80% FORM enables you to get to the solution and sign off faster.
                        </p>
                        
                        <ul class="extension-features">
                            <li>200+ Click & place dynamic SketchUp cabinets</li>
                            <li>Monthly cabinet additions & updates</li>
                            <li>Custom model requests - tell me what you need & I'll build it</li>
                            <li>Professional documentation</li>
                        </ul>
                        
                        <div class="extension-footer">
                            <div class="extension-pricing">
                                <span class="extension-price">£49.99/Month</span>
                                <span class="extension-trial">7 day trial</span>
                            </div>
                            <div class="extension-actions">
                                <button class="purchase-licence-button" data-extension="form">Purchase Licence</button>
                                <a href="/" class="download-button">Download</a>
                                <button class="see-more-button" data-extension="form">See More</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NestMate Extension -->
                <div class="extension-card interactive-element" data-category="fabrication utilities" data-status="beta">
                    <div class="extension-preview">
                        <img src="images/NestMate_ExtensionSingle.png" alt="NestMate Extension">
                        <div class="extension-status status-beta">Beta</div>
                    </div>
                    <div class="extension-content">
                        <div class="extension-header">
                            <div>
                                <h3 class="extension-title">NestMate</h3>
                                <p class="extension-category">Fabrication • Utilities</p>
                            </div>
                            <div class="extension-rating">
                                <span class="rating-text">No reviews yet</span>
                            </div>
                        </div>
                        
                        <p class="extension-description">
                            Please note that NestMate Beta is only available to a select few via the app. What is in-app is placeholder and very minimal part function.
                        </p>
                        
                        <ul class="extension-features">
                            <li>Intelligent part arrangement algorithms</li>
                            <li>Waste minimization and optimization</li>
                            <li>Multiple material support</li>
                            <li>Export to CNC machines</li>
                        </ul>
                        
                        <div class="extension-footer">
                            <div class="extension-pricing">
                                <span class="extension-price price-free">Free Beta</span>
                            </div>
                            <div class="extension-actions">
                                <a href="#" class="download-button">Download</a>
                                <button class="see-more-button" data-extension="nestmate">See More</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Coming Soon Section -->
    <section class="coming-soon-section">
        <div class="extensions-container">
            <div class="section-header">
                <h2 class="section-title">Development Roadmap</h2>
                <p class="section-subtitle">Upcoming extensions and tools in active development</p>
            </div>
            
            <div class="roadmap-timeline">
                <div class="timeline-item">
                    <div class="timeline-marker">Q3</div>
                    <div class="timeline-content">
                        <h3 class="timeline-title">NestMate</h3>
                        <p class="timeline-description">
                            Panel Saw Nesting for saw efficiency and CNC Nesting Algorithm for material efficiency.
                        </p>
                        <ul class="timeline-features">
                            <li>Panel Saw Nesting for saw efficiency</li>
                            <li>Panel Saw Cut Lists</li>
                            <li>CNC Nesting Algorithm for material efficiency</li>
                            <li>Small Parts Rule, No small parts on perimeter if less than 200mm x 200mm squares. Solves Vacuum pump issues.</li>
                            <li>CNC Export to DXF for Nests and single parts</li>
                            <li>Part list export for management</li>
                        </ul>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-marker">Q4</div>
                    <div class="timeline-content">
                        <h3 class="timeline-title">Production Fixtures</h3>
                        <p class="timeline-description">
                            Alpha Release of Production Fixtures - Automate fixtures and fittings within SketchUp.
                        </p>
                        <ul class="timeline-features">
                            <li>Automate fixtures and fittings within SketchUp</li>
                            <li>Dominos, biscuits, lamellos and screws</li>
                            <li>3mm, 5mm and 8mm Holes</li>
                            <li>32mm multibore spacers</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Extension Detail Modal -->
    <div id="extensionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Extension Details</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-hero">
                    <div class="modal-preview" id="modalPreview"></div>
                    <div class="modal-info">
                        <div class="modal-status" id="modalStatus"></div>
                        <div class="modal-rating" id="modalRating"></div>
                        <div class="modal-price" id="modalPrice"></div>
                        <div class="modal-trial" id="modalTrial"></div>
                    </div>
                </div>
                
                <div class="modal-description" id="modalDescription"></div>
                <div class="modal-long-description" id="modalLongDescription"></div>
                <div class="modal-whats-new" id="modalWhatsNew"></div>
                <div class="modal-features" id="modalFeatures"></div>
                <div class="modal-faqs" id="modalFaqs"></div>
                <div class="modal-specs" id="modalSpecs"></div>
                <div class="modal-reviews" id="modalReviews"></div>
                
                <div class="modal-subscriptions" id="modalSubscriptions"></div>
            </div>
        </div>
    </div>

    <!-- Free Download Modal -->
    <div id="downloadModal" class="modal">
        <div class="modal-content download-modal-content">
            <div class="modal-header">
                <h2>Download FORM</h2>
                <span class="close-modal" id="downloadModalClose">&times;</span>
            </div>
            <div class="modal-body">
                <div class="download-hero">
                    <h3>Get FORM for SketchUp</h3>
                    <p>Download the latest version of FORM and start streamlining your SketchUp workflow today.</p>
                    <button id="startDownloadBtn" class="download-btn">
                        <span class="download-icon">⬇</span> Download FORM V1.0.8
                    </button>
                </div>
                <div class="install-video-section">
                    <h4>How to Install FORM Extension</h4>
                    <div class="video-container">
                        <iframe 
                            width="100%" 
                            height="315" 
                            src="https://www.youtube.com/embed/0P9xkwVoQrw" 
                            title="How to Install FORM Extension" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <script>
        // Page-specific JavaScript
        
        // Extension data from existing catalogue
        const extensionData = {
            form: {
                title: "FORM for SketchUp",
                subtitle: "Spend less time modelling and more time making",
                status: "Available",
                statusClass: "status-available",
                rating: "4.8",
                ratingStars: "★★★★★",
                ratingCount: "10 Ratings",
                price: "£49.99/Month",
                trial: "7 day trial, no credit card required",
                description: "FORM for SketchUp is a productivity extension designed to streamline your workflow and boost efficiency. Cutting cabinet design time within SketchUp up to 80% FORM enables you to get to the solution and sign off faster.",
                longDescription: "Take control of your digital workspace with smart automation, beautiful interfaces, and powerful collaboration tools.",
                features: [
                    "200+ Click & place dynamic SketchUp cabinets",
                    "Monthly cabinet additions & updates",
                    "Custom model requests - tell me what you need & I'll build it",
                    "Professional documentation",
                    "Access the mobile catalogue with AR cabinets, handy numbering system and tool tips",
                    "Beta access to NestMate - FORM's Nesting Extension",
                    "Blueprint drawings - pre designed in Layout, PDF'd without branding",
                    "Drag and drop simplicity"
                ],
                details: "FORM seamlessly integrates with SketchUp to provide professional-grade digital fabrication capabilities that scale with your projects. From concept to CNC-ready output, FORM streamlines every step of your digital fabrication workflow.",
                specifications: {
                    developer: "runLemonade",
                    language: "EN",
                    size: "15.2 MB [ Total size on model download 512MB +]",
                    compatibility: "SketchUp 2022+",
                    ageRating: "4+",
                    inAppPurchases: "No. Licence Purchased Outside of App"
                },
                whatsNew: {
                    version: "1.0.8",
                    date: "7th July",
                    description: "Public Issued Release of the FORM for SketchUp Extension. 200 Dynamic cabinet designs click and place. Features include proxy models, a replace unit feature and dynamically controlled cabinets. Improved workflow from the manual download library. Available for Windows & Mac"
                },
                subscriptions: [
                    {
                        name: "Monthly Subscription",
                        description: "Full Access, Rolling 30 day subscription",
                        price: "£49.99/Month",
                        action: "Start your monthly subscription today"
                    },
                    {
                        name: "Yearly Subscription",
                        description: "Full Access, Rolling 12 month subscription. Save £100 when buying for the year.",
                        price: "£499/Year",
                        action: "Save £100 with yearly subscription"
                    },
                    {
                        name: "Multiple User, Yearly Subscription",
                        description: "Full Access for Studio Users. Discounted Pricing Available for Studios with 5+ Users.",
                        price: "Request Pricing",
                        action: "Contact us for studio pricing"
                    }
                ],
                reviews: [
                    {
                        rating: 5,
                        title: "Great product with excellent support",
                        author: "Simon Wright",
                        role: "Cabinetmaker",
                        text: "This first release of FORM for SketchUp has already sped up my client designs so much. Toby is great with support and the additional models I get a month are well worth the 30 quid. Can't wait for the shaker update. Thanks Toby, great product."
                    },
                    {
                        rating: 4,
                        title: "Saves hours on quoting",
                        author: "James Graham",
                        role: "Cabinetmaker",
                        text: "I just use the empty cabinets to create quick quotes from. I'm a bit of a technical idiot, there's lots in this that I don't use but for speedy quoting this thing has saved me hours. Back end needs a bit more work but Toby has said that this is in the pipeline."
                    },
                    {
                        rating: 5,
                        title: "Surprisingly easy to use",
                        author: "Matt Barker",
                        role: "Cabinetmaker",
                        text: "I was a bit apprehensive of trying this. I use SketchUp day to day and didn't want to change how I do things, but I have to say that I am surprised at how easy it is to use after an hour of using it. The drag and drop works well for client changes. It's regularly updated and Toby's helpful. Would recommend."
                    }
                ],
                faqs: [
                    {
                        question: "What is FORM for SketchUp?",
                        answer: "FORM is a premium SketchUp extension designed for digital fabrication professionals. It provides parametric modeling, CNC toolpath generation, material optimization, and professional documentation tools."
                    },
                    {
                        question: "How does the 7-day trial work?",
                        answer: "You can try FORM for free for 7 days with full access to all features. No credit card is required to start your trial. You can cancel anytime during the trial period."
                    },
                    {
                        question: "What's included in the subscription?",
                        answer: "Your subscription includes full access to FORM, regular updates, new component libraries, technical support, and access to our community resources."
                    },
                    {
                        question: "Can I cancel my subscription anytime?",
                        answer: "Yes, you can cancel your subscription at any time. Your access will continue until the end of your current billing period."
                    },
                    {
                        question: "What SketchUp versions are supported?",
                        answer: "FORM supports SketchUp 2020 and newer versions. We regularly update compatibility with new SketchUp releases."
                    }
                ],
                downloadUrl: "https://github.com/runlemonade/web-dev/releases/download/V1.0.8/FORM_byrunLemonade_V1.0.8.rbz",
                modalImage: 'images/hero-product-for-colour.png'
            },
            nestmate: {
                title: "NestMate",
                subtitle: "Advanced nesting algorithms for optimal material utilization",
                status: "Beta",
                statusClass: "status-beta",
                rating: "No reviews yet",
                price: "Free Beta",
                description: "Please note that NestMate Beta is only available to a select few via the app. What is in-app is placeholder and very minimal part function.",
                features: [
                    "Intelligent part arrangement algorithms",
                    "Waste minimization and optimization",
                    "Multiple material support",
                    "Export to CNC machines",
                    "Real-time nesting preview",
                    "Custom nesting rules and constraints",
                    "Batch processing capabilities",
                    "Detailed waste reports"
                ],
                details: "Advanced nesting algorithms for optimal material utilization. Automatically arrange parts to minimize waste and maximize efficiency.",
                specifications: {
                    developer: "runLemonade",
                    language: "EN",
                    size: "8.7 MB"
                },
                downloadUrl: "#",
                demoUrl: "https://www.youtube.com/@runlemonade",
                modalImage: 'images/NestMate_ExtensionSingle.png'
            }
        };

        // Modal functionality
        const modal = document.getElementById('extensionModal');
        const downloadModal = document.getElementById('downloadModal');
        const closeBtn = document.querySelector('.close');
        const downloadModalClose = document.getElementById('downloadModalClose');
        console.log('Download modal close button:', downloadModalClose);
        const seeMoreButtons = document.querySelectorAll('.see-more-button');
        const purchaseLicenceButtons = document.querySelectorAll('.purchase-licence-button');

        // Open modal
        seeMoreButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const extensionKey = button.getAttribute('data-extension');
                const extension = extensionData[extensionKey];
                
                if (extension) {
                    openModal(extension);
                }
            });
        });

        // Open modal and scroll to subscriptions
        purchaseLicenceButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const extensionKey = button.getAttribute('data-extension');
                const extension = extensionData[extensionKey];
                
                if (extension) {
                    openModal(extension, 'subscriptions');
                }
            });
        });

        // Close modal
        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.style.display === 'block') {
                modal.style.display = 'none';
            }
            if (e.key === 'Escape' && downloadModal.style.display === 'block') {
                downloadModal.style.display = 'none';
            }
        });

        // Download modal functionality
        if (downloadModalClose) {
            downloadModalClose.addEventListener('click', () => {
                downloadModal.style.display = 'none';
            });
        }
        
        // Alternative close button handler using event delegation
        document.addEventListener('click', (e) => {
            if (e.target && e.target.id === 'downloadModalClose') {
                console.log('Close button clicked');
                downloadModal.style.display = 'none';
            }
        });

        // Close download modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === downloadModal) {
                downloadModal.style.display = 'none';
            }
        });

        // Initialize download modal when a modal is opened
        let downloadModalInitialized = false;

        function initializeDownloadModal() {
            const downloadBtn = document.getElementById('startDownloadBtn');
            
            console.log('Initializing download modal, download button:', downloadBtn);
            
            let hasSubscribed = false;
            let emailEntered = false;
            
            function showDownloadButton() {
                console.log('showDownloadButton called');
                if (downloadBtn) {
                    console.log('Download button found, showing it');
                    downloadBtn.style.display = 'flex';
                    downloadBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
                } else {
                    console.log('Download button not found!');
                }
            }
        }

            // Download button functionality
            const downloadButton = document.getElementById('startDownloadBtn');
            if (downloadButton) {
                downloadButton.addEventListener('click', () => {
                    // Start download
                    const downloadUrl = 'https://github.com/runlemonade/web-dev/releases/download/V1.0.8/FORM_byrunLemonade_V1.0.8.rbz';
                    const link = document.createElement('a');
                    link.href = downloadUrl;
                    link.download = 'FORM_byrunLemonade_V1.0.8.rbz';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    // Update button text
                    downloadButton.innerHTML = '<span class="download-icon">✓</span>Download Started';
                    downloadButton.disabled = true;
                    
                    // Close modal after a delay
                    setTimeout(() => {
                        downloadModal.style.display = 'none';
                        // Reset button
                        setTimeout(() => {
                            downloadButton.innerHTML = '<span class="download-icon">⬇</span>Download FORM V1.0.8';
                            downloadButton.disabled = false;
                            downloadButton.style.display = 'none';
                        }, 2000);
                    }, 2000);
                });
            }

        function openModal(extension, scrollToSection = null) {
            document.getElementById('modalTitle').textContent = extension.title;
            document.getElementById('modalPreview').innerHTML = `<img src="${extension.modalImage}" alt="${extension.title}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;">`;
            document.getElementById('modalStatus').textContent = extension.status;
            document.getElementById('modalStatus').className = `modal-status ${extension.statusClass}`;
            
            // Handle rating display
            if (extension.ratingStars) {
                document.getElementById('modalRating').innerHTML = `
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1.5rem; font-weight: 700; color: #333;">${extension.rating}</span>
                        <span class="stars">${extension.ratingStars}</span>
                        <span style="font-size: 0.9rem; color: #666;">${extension.ratingCount}</span>
                    </div>
                `;
            } else {
                document.getElementById('modalRating').innerHTML = `<span class="stars">${extension.rating}</span>`;
            }
            
            document.getElementById('modalPrice').textContent = extension.price;
            document.getElementById('modalTrial').textContent = extension.trial || '';
            document.getElementById('modalDescription').textContent = extension.description;
            document.getElementById('modalLongDescription').textContent = extension.longDescription || '';
            
            // Populate What's New
            if (extension.whatsNew) {
                document.getElementById('modalWhatsNew').innerHTML = `
                    <h3>What's New</h3>
                    <div class="whats-new-version">Version ${extension.whatsNew.version} • ${extension.whatsNew.date}</div>
                    <div class="whats-new-description">${extension.whatsNew.description}</div>
                `;
            }
            
            // Populate FAQs
            if (extension.faqs) {
                const faqsList = extension.faqs.map(faq => `
                    <div class="faq-item">
                        <div class="faq-question">${faq.question}</div>
                        <div class="faq-answer">
                            <p>${faq.answer}</p>
                        </div>
                    </div>
                `).join('');
                document.getElementById('modalFaqs').innerHTML = `
                    <h3>Frequently Asked Questions</h3>
                    <div class="faq-list">${faqsList}</div>
                `;
                
                // Add FAQ toggle functionality
                document.querySelectorAll('.faq-question').forEach(question => {
                    question.addEventListener('click', () => {
                        const answer = question.nextElementSibling;
                        const isActive = question.classList.contains('active');
                        
                        // Close all other FAQs
                        document.querySelectorAll('.faq-question').forEach(q => q.classList.remove('active'));
                        document.querySelectorAll('.faq-answer').forEach(a => a.classList.remove('active'));
                        
                        // Toggle current FAQ
                        if (!isActive) {
                            question.classList.add('active');
                            answer.classList.add('active');
                        }
                    });
                });
            }
            
            // Populate specifications
            if (extension.specifications) {
                const specsList = Object.entries(extension.specifications).map(([key, value]) => `
                    <div class="spec-item">
                        <span class="spec-label">${key.charAt(0).toUpperCase() + key.slice(1)}</span>
                        <span class="spec-value">${value}</span>
                    </div>
                `).join('');
                document.getElementById('modalSpecs').innerHTML = `
                    <h3>Specifications</h3>
                    <div class="specs-grid">${specsList}</div>
                `;
            }
            
            // Populate features
            const featuresList = extension.features.map(feature => `<li>${feature}</li>`).join('');
            document.getElementById('modalFeatures').innerHTML = `
                <h3>Key Features</h3>
                <ul>${featuresList}</ul>
            `;
            
            // Populate subscriptions
            if (extension.subscriptions) {
                const subscriptionCards = extension.subscriptions.map((sub, index) => {
                    let subscribeButton = '';
                    if (sub.name === 'Monthly Subscription') {
                        subscribeButton = '<button class="subscribe-btn" onclick="window.open(\'https://buy.stripe.com/00w28qcmYf5B5Q0dwdc7u00\', \'_blank\')">Subscribe</button>';
                    } else if (sub.name === 'Yearly Subscription') {
                        subscribeButton = '<button class="subscribe-btn" onclick="window.open(\'https://buy.stripe.com/14A4gyev6bTp2DO8bTc7u01\', \'_blank\')">Subscribe</button>';
                    } else {
                        subscribeButton = '<button class="subscribe-btn contact-btn" onclick="window.open(\'mailto:contact@runlemonade.com?subject=Studio Pricing Inquiry\', \'_blank\')">Contact Us</button>';
                    }
                    
                    return `
                        <div class="subscription-card ${index === 1 ? 'featured' : ''}">
                            <div class="subscription-name">${sub.name}</div>
                            <div class="subscription-description">${sub.description}</div>
                            <div class="subscription-price">${sub.price}</div>
                            <div class="subscription-action">${sub.action}</div>
                            ${subscribeButton}
                        </div>
                    `;
                }).join('');
                document.getElementById('modalSubscriptions').innerHTML = `
                    <h3>Subscriptions</h3>
                    <div class="subscription-cards">${subscriptionCards}</div>
                `;
            }
            
            // Populate reviews
            if (extension.reviews) {
                const reviewsList = extension.reviews.map(review => `
                    <div class="review-item">
                        <div class="review-header">
                            <div class="review-info">
                                <h4>${review.title}</h4>
                                <div class="review-author">${review.author} • ${review.role}</div>
                            </div>
                            <div class="review-stars">${'★'.repeat(review.rating)}${'☆'.repeat(5-review.rating)}</div>
                        </div>
                        <div class="review-text">${review.text}</div>
                    </div>
                `).join('');
                document.getElementById('modalReviews').innerHTML = `
                    <h3>Ratings & Reviews</h3>
                    <div class="reviews-list">${reviewsList}</div>
                `;
            }
            
            modal.style.display = 'block';
            
            // Initialize download modal if not already done
            if (!downloadModalInitialized) {
                initializeDownloadModal();
                downloadModalInitialized = true;
            }
            
            // Scroll to specific section if requested
            if (scrollToSection === 'subscriptions') {
                setTimeout(() => {
                    const subscriptionsSection = document.getElementById('modalSubscriptions');
                    if (subscriptionsSection) {
                        subscriptionsSection.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                    }
                }, 100); // Small delay to ensure modal is fully rendered
            }
            // Add Subscribe and Download buttons for FORM
            if (extension.title === "FORM for SketchUp") {
                document.getElementById('modalTrial').innerHTML += `<br><button class='subscribe-btn' style='margin: 1rem 0 0 0; background: #FEC51D; color: #000; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; padding: 12px 24px;' onclick="window.open('https://buy.stripe.com/00w28qcmYf5B5Q0dwdc7u00', '_blank')">Subscribe</button><br><button class='download-btn' style='margin: 1rem 0 0 0; background: #FEC51D; color: #000; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; padding: 12px 24px;' onclick=\"window.open('${extension.downloadUrl}', '_blank')\"><span class='download-icon'>⬇</span> Download FORM V1.0.8</button>`;
            }
        }

        // Filter functionality
        const filterPills = document.querySelectorAll('.filter-pill');
        const extensionCards = document.querySelectorAll('.extension-card');
        const searchInput = document.getElementById('searchInput');

        // Category filtering
        filterPills.forEach(pill => {
            pill.addEventListener('click', (e) => {
                e.preventDefault();
                
                // Update active state for category filters
                if (pill.hasAttribute('data-filter')) {
                    document.querySelectorAll('[data-filter]').forEach(p => p.classList.remove('active'));
                    pill.classList.add('active');
                    
                    const filter = pill.getAttribute('data-filter');
                    filterExtensions(filter, null);
                }
                
                // Handle status filters
                if (pill.hasAttribute('data-status')) {
                    const status = pill.getAttribute('data-status');
                    // Toggle status filter
                    pill.classList.toggle('active');
                    const activeStatus = pill.classList.contains('active') ? status : null;
                    filterExtensions(null, activeStatus);
                }
            });
        });

        // Search functionality
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            filterExtensions(null, null, searchTerm);
        });

        function filterExtensions(category = null, status = null, search = '') {
            const activeCategoryFilter = category || document.querySelector('[data-filter].active')?.getAttribute('data-filter') || 'all';
            const activeStatusFilter = status || document.querySelector('[data-status].active')?.getAttribute('data-status');
            
            extensionCards.forEach(card => {
                const cardCategories = card.getAttribute('data-category').split(' ');
                const cardStatus = card.getAttribute('data-status');
                const cardTitle = card.querySelector('.extension-title').textContent.toLowerCase();
                const cardDescription = card.querySelector('.extension-description').textContent.toLowerCase();
                
                let show = true;
                
                // Category filter
                if (activeCategoryFilter !== 'all' && !cardCategories.includes(activeCategoryFilter)) {
                    show = false;
                }
                
                // Status filter
                if (activeStatusFilter && cardStatus !== activeStatusFilter) {
                    show = false;
                }
                
                // Search filter
                if (search && !cardTitle.includes(search) && !cardDescription.includes(search)) {
                    show = false;
                }
                
                card.style.display = show ? 'block' : 'none';
            });
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);

        // Observe elements for animation
        document.querySelectorAll('.extension-card, .timeline-item').forEach(el => {
            observer.observe(el);
        });

        // Download button interactions
        document.querySelectorAll('.download-button').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const buttonText = button.textContent;
                
                if (buttonText === 'Download') {
                    // Open download modal for FORM extension
                    downloadModal.style.display = 'block';
                } else if (buttonText === 'Purchase') {
                    // Simulate purchase process
                    button.textContent = 'Processing...';
                    button.disabled = true;
                    
                    setTimeout(() => {
                        button.textContent = 'Purchased ✓';
                        button.style.background = 'var(--success)';
                        
                        setTimeout(() => {
                            button.textContent = buttonText;
                            button.disabled = false;
                            button.style.background = '';
                        }, 2000);
                    }, 1500);
                }
                
                if (buttonText === 'Join Beta') {
                    // Simulate beta signup
                    button.textContent = 'Joining...';
                    button.disabled = true;
                    
                    setTimeout(() => {
                        button.textContent = 'Joined Beta ✓';
                        button.style.background = 'var(--success)';
                        
                        setTimeout(() => {
                            button.textContent = 'Beta Active';
                            button.disabled = false;
                            button.style.background = 'var(--info)';
                        }, 2000);
                    }, 1500);
                }
            });
        });

        // Extension card hover effects
        document.querySelectorAll('.extension-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-8px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0) scale(1)';
            });
        });

        // See More button functionality
        document.querySelectorAll('.see-more-button').forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const extensionId = button.getAttribute('data-extension');
                if (extensionId && extensionData[extensionId]) {
                    openModal(extensionData[extensionId]);
                }
            });
        });

        // Add loading states for better UX
        window.addEventListener('load', () => {
            document.body.classList.add('loaded');
            
            // Stagger animation of extension cards
            const cards = document.querySelectorAll('.extension-card');
            cards.forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('fade-in');
                }, index * 100);
            });
        });
    </script>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Check for URL parameters to auto-open modal
        const urlParams = new URLSearchParams(window.location.search);
        const modalToOpen = urlParams.get('openModal');
        const scrollTo = urlParams.get('scrollTo');
        const openDownloadModal = urlParams.get('openDownloadModal');
        
        console.log('URL parameters:', { modalToOpen, scrollTo, openDownloadModal });
        
        if (modalToOpen && extensionData && extensionData[modalToOpen]) {
            console.log('Opening modal for:', modalToOpen);
            // Small delay to ensure everything is loaded
            setTimeout(() => {
                openModal(extensionData[modalToOpen], scrollTo);
            }, 500);
        }
        
        if (openDownloadModal) {
            console.log('Opening download modal');
            // Small delay to ensure everything is loaded
            setTimeout(() => {
                const downloadModal = document.getElementById('downloadModal');
                if (downloadModal) {
                    downloadModal.style.display = 'block';
                } else {
                    console.warn('Download modal not found');
                }
            }, 500);
        }
        
        // Handle download button clicks (only if not already handled by component loader)
        function openDownloadModalDirect() {
            var downloadModal = document.getElementById('downloadModal');
            if (downloadModal) {
                downloadModal.style.display = 'block';
            }
        }
        
        function handleDownloadBtnClick(e) {
            e.preventDefault();
            if (window.location.pathname.includes('extensions.html')) {
                openDownloadModalDirect();
            } else {
                window.location.href = '/extensions.html?openDownloadModal=true';
            }
        }
        
        // Only add event listeners if they don't already exist
        var freeBtn = document.getElementById('freeDownloadBtn');
        if (freeBtn && !freeBtn.hasAttribute('data-listener-added')) {
            freeBtn.addEventListener('click', handleDownloadBtnClick);
            freeBtn.setAttribute('data-listener-added', 'true');
        }
        
        var headerBtn = document.getElementById('headerDownloadBtn');
        if (headerBtn && !headerBtn.hasAttribute('data-listener-added')) {
            headerBtn.addEventListener('click', handleDownloadBtnClick);
            headerBtn.setAttribute('data-listener-added', 'true');
        }
    });
    </script>
</body>
</html>